{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Parking Predictions | ParkSpero Melbourne</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lucide-static@latest/font/lucide.css">
  <style>
    html, body { height: 100%; }
    body {
      margin: 0;
      padding: 0;
      font-family: 'Montserrat', Arial, sans-serif;
      background: linear-gradient(to bottom, #6002ee 0%, #3a1397 60%, #102178 100%);
      min-height: 100vh;
      color: #452179;
    }
    .navbar {
      width: 100%;
      background: linear-gradient(90deg, #be7bf6 0%, #9400ff 80%);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 40px;
      padding: 0 32px;
      position: relative;
      min-height: 90px;
      box-sizing: border-box;
    }
    .navbar-content {
      width: 100%;
      max-width: 1500px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .logo-row {
      display: flex;
      align-items: center;
      gap: 18px;
    }
    .logo-row img {
      height: 106px;
      width: 106px;
      object-fit: contain;
      filter: drop-shadow(0 2px 10px #1d1a2e80);
    }
    .site-title {
      font-size: 1.8rem;
      font-weight: 900;
      color: #ffe441;
      letter-spacing: 1.5px;
      text-shadow: 0 2px 8px #32246888;
    }

    .marquee-bar {
      background: linear-gradient(90deg, #be7bf6cc 0%, #ffe441ee 85%);
      border-radius: 16px;
      min-width: 320px;
      max-width: 320px;
      height: 44px;
      margin: 0 18px;
      box-shadow: 0 2px 12px #963be333, 0 1px 8px #ffe44135;
      display: flex;
      align-items: center;
      overflow: hidden;
      padding: 0 20px;
      position: relative;
    }
    .marquee-text {
      display: flex;
      align-items: center;
      white-space: nowrap;
      font-weight: 900;
      color: #421d79; /* Deep purple, same colour tone as header */
      font-size: 1.09em;
      animation: marquee-move 12s linear infinite;
      letter-spacing: 0.5px;
      text-shadow: 0 1px 6px #fff8, 0 1px 3px #be7bf6cc;
    }
    .marquee-car-img {
      vertical-align: middle;
      display: inline-block;
      height: 22px;
      margin-right: 12px;
      margin-bottom: 2px;
      filter: drop-shadow(0 2px 8px #ffe44190); /* Give the car a little sparkle */
    }
    @keyframes marquee-move {
      0% { transform: translateX(50%);}
      100% { transform: translateX(-100%);}
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 5px;
      font-weight: 700;
      font-size: 0.8rem;
    }
    .nav-link {
      color: #ffffff;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 5px;
      transition: opacity 0.15s;
      opacity: 0.93;
      font-size: 1.18em;
      font-weight: 900;
      padding: 0.22em 0.86em;
      border-radius: 10px;
      position: relative;
      cursor: pointer;
    }
    .nav-link:hover,
    .nav-link:focus-visible {
      color: #ffd900 !important;
      text-shadow:
          0 0 14px #ffd900cc,
          0 0 2px #ffd900cc,
          0 1px 6px #fff8;
      outline: none;
      opacity: 1;
      background: none;
      box-shadow: none;
    }

    .nav-link.active {
      color: #ffd900 !important;
      text-shadow: 0 0 14px #ffd900cc, 0 0 2px #ffd900cc, 0 1px 6px #fff8;
      background: none;
      box-shadow: none;
    }

    /* --- Predictions Section --- */
    .container {
      max-width: 950px;
      margin: 32px auto 0 auto;
      padding: 24px 0 38px 0;
    }
    .pred-card, .pred-block {
      border-radius: 16px;
      box-shadow: 0 3px 20px #c8b4ff22;
      margin-bottom: 34px;
      padding: 1.5em 1.4em 2em 1.4em;
      background: #faf5ff;
      border: 1.7px solid #d1a7ff30;
      animation: fadeIn 0.95s;
    }
    .pred-card-title {
      color: #702ccf;
      font-size: 1.4em;
      font-weight: 900;
      margin-bottom: 7px;
      letter-spacing: 0.03em;
    }
    .pred-card-desc {
      color: #7626b7;
      font-size: 1.09em;
      margin-bottom: 18px;
      margin-top: 3px;
      font-weight: 500;
      opacity: 0.87;
    }
    .forecast-grid {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 20px;
      margin-bottom: 8px;
    }
    .forecast-box {
      padding: 22px 17px 18px 19px;
      border-radius: 13px;
      background: #fff;
      border: 1.6px solid #eee7ff;
      box-shadow: 0 3px 15px #1c00631a;
      display: flex;
      flex-direction: column;
      gap: 2px;
      animation: fadeIn 1.2s;
    }
    .forecast-box.green {
      background: #e9fff0;
      border-color: #82e3aa;
    }
    .forecast-box.yellow {
      background: #fffde9;
      border-color: #ffe09d;
    }
    .forecast-box.red {
      background: #fff3f3;
      border-color: #ffbebe;
    }
    .forecast-box h4 {
      font-size: 1.09em;
      font-weight: 900;
      margin-bottom: 3px;
      letter-spacing: 0.02em;
    }
    .forecast-box.green h4 { color: #2f9652;}
    .forecast-box.yellow h4 { color: #bb8b09;}
    .forecast-box.red h4 { color: #d60808;}
    .forecast-box .main-text {
      font-size: 2em;
      font-weight: 900;
      margin-bottom: 4px;
    }
    .forecast-box.green .main-text { color: #13ad48;}
    .forecast-box.yellow .main-text { color: #e4a300;}
    .forecast-box.red .main-text { color: #e40a1e;}
    .forecast-box .sub-text {
      font-size: 1.06em;
      color: #6a727c;
      font-weight: 500;
      margin-top: 3px;
    }

    /* Optimal Windows section */
    .arrivals-block {
      margin-top: 14px;
      margin-bottom: 0;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .arrival-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-radius: 12px;
      padding: 18px 22px;
      font-size: 1.14em;
      font-weight: 700;
      border: 1.5px solid #d1a7ff55;
      box-shadow: 0 2px 10px #cea2ff19;
      background: #f9f5ff;
      transition: background 0.19s;
    }
    .arrival-row.green {
      background: #ebfff1;
      border-color: #98f3b8;
      color: #119f41;
    }
    .arrival-row.blue {
      background: #f5faff;
      border-color: #b7d5ff;
      color: #3a66c7;
    }
    .arrival-row.yellow {
      background: #fffbe7;
      border-color: #ffec98;
      color: #c98e0f;
    }
    .arrival-row.red {
      background: #fff2f4;
      border-color: #ffb9bb;
      color: #d60808;
    }
    .arrival-row span.arrival-badge {
      font-weight: bold;
      font-size: 1.16em;
      margin-left: 15px;
    }
    .arrival-row.green span.arrival-badge { color: #13ad48;}
    .arrival-row.blue span.arrival-badge { color: #2672d7;}
    .arrival-row.yellow span.arrival-badge { color: #efb100;}
    .arrival-row.red span.arrival-badge { color: #e40a1e;}
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @media (max-width: 1050px) {
      .container { max-width: 99vw; padding: 2vw; }
      .forecast-grid { grid-template-columns: 1fr; gap: 14px; }
      .navbar-content { flex-direction: column; gap: 16px; }
      .marquee-bar { min-width: 220px; max-width: 99vw;}
    }

        #loadingMask {
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.22s;
    }
    #loadingMask.active {
        display: flex !important;
        opacity: 1;
        pointer-events: auto;
    }

    .golden-glow {
  color: #ffe441;
  font-weight: 900;
  text-shadow:
    /* Black thick border (outer edge) */
    -2px -2px 2px #222,
    2px -2px 2px #222,
    -2px 2px 2px #222,
    2px 2px 2px #222,
    /* Thinner black border (connecting the middle) */
    -1px 0px 1px #222,
    1px 0px 1px #222,
    0px -1px 1px #222,
    0px 1px 1px #222,
    /* Golden glow (periphery) */
    0 0 14px #ffd900cc,
    0 0 2px #ffd900cc,
    0 1px 6px #fff8,
    0 0 18px #ffe441b0;
}
  </style>
</head>
<body>
  <!-- NAVBAR (same as home) -->
  <div class="navbar">
    <div class="navbar-content">
      <div class="logo-row">
        <img src="{% static 'TA12_logo_V2-removebg-preview.png' %}" alt="Logo"/>
        <span class="site-title">ParkSpero Melbourne</span>
      </div>
      <div class="marquee-bar">
        <span class="marquee-text">
            <img class="marquee-car-img" src="{% static 'car-icon-gif-hd-png-download.png' %}" alt="car" />
            G’day from ParkSpero Melbourne! TA12 brings you easier parking
        </span>
      </div>
      <div class="nav-links">
        <a class="nav-link" href="{% url 'home' %}"><i class="lucide lucide-home"></i>Home</a>
        <a class="nav-link" href="{% url 'live_parking' %}"><i class="lucide lucide-info"></i>Live Parking</a>
        <a class="nav-link {% if request.resolver_match.url_name == 'predictions' %}active{% endif %}" href="{% url 'predictions' %}"><i class="lucide lucide-bar-chart-3"></i>Predictions</a>
        <a class="nav-link" href="{% url 'analytics' %}"><i class="lucide lucide-parking-circle"></i>Analytics</a>
        <!-- <a class="nav-link" href="{% url 'contact' %}"><i class="lucide lucide-mail"></i>Contact</a>-->
      </div>
    </div>
  </div>
  <div class="container">

    <!-- Smart Parking Forecasts -->
    <div class="pred-card">
      <div class="pred-card-title">Smart Parking Forecasts</div>
      <div class="pred-card-desc">Past data analysis to help you plan smarter parking</div>
      <div class="forecast-grid">
        <div class="forecast-box green">
          <h4>Next 45 minutes</h4>
          <div class="main-text">Excellent availability</div>
          <div class="sub-text">22+ spots opening up soon</div>
        </div>
        <div class="forecast-box yellow">
          <h4>2-3 hours ahead</h4>
          <div class="main-text">Moderate availability</div>
          <div class="sub-text">Afternoon peak approaching</div>
        </div>
        <div class="forecast-box red">
          <h4>Evening rush (4-6 PM)</h4>
          <div class="main-text">Critical shortage</div>
          <div class="sub-text">Consider metro alternatives</div>
        </div>
      </div>
    </div>
    <!-- Optimal Arrival Windows -->
    <div class="pred-block">
      <div class="pred-card-title">Optimal Arrival Windows</div>
      <div class="pred-card-desc">Strategic timing recommendations based on historical patterns</div>
      <div class="arrivals-block">
        <div class="arrival-row green">
          <div>
            <span>6:30 AM - 9:00 AM</span>
            <div style="font-size:0.96em;font-weight:500;color:#159141a0;margin-top:3px;">92% success rate finding spots within 1 block radius</div>
          </div>
          <span class="arrival-badge">Premium</span>
        </div>
        <div class="arrival-row blue">
          <div>
            <span>10:30 AM - 1:30 PM</span>
            <div style="font-size:0.96em;font-weight:500;color:#2672d7b8;margin-top:3px;">74% success rate finding spots within 2 block radius</div>
          </div>
          <span class="arrival-badge">Good</span>
        </div>
        <div class="arrival-row yellow">
          <div>
            <span>2:00 PM - 4:00 PM</span>
            <div style="font-size:0.96em;font-weight:500;color:#efa800b2;margin-top:3px;">48% success rate finding spots within 3 block radius</div>
          </div>
          <span class="arrival-badge">Fair</span>
        </div>
        <div class="arrival-row red">
          <div>
            <span>4:00 PM - 7:00 PM</span>
            <div style="font-size:0.96em;font-weight:500;color:#e40a1eb5;margin-top:3px;">18% success rate finding spots within 4 block radius</div>
          </div>
          <span class="arrival-badge">Challenge</span>
        </div>
      </div>
    </div>
  </div>

  <script>
      function showLoadingMask() {
      const mask = document.getElementById('loadingMask');
      mask.style.display = 'flex';
      setTimeout(() => mask.classList.add('active'), 10); // fade in
      }

      function hideLoadingMask() {
      const mask = document.getElementById('loadingMask');
      mask.classList.remove('active');
      setTimeout(() => mask.style.display = 'none', 250);
      }

      // All nav-link/button clicks display loading, then redirect after 1.2 seconds.
      document.querySelectorAll('.nav-link, .dashboard-btn').forEach(link => {
      link.addEventListener('click', function(e) {
          if (link.target === "_blank" || (link.href && !link.href.startsWith(window.location.origin))) return;
          e.preventDefault();
          showLoadingMask();
          setTimeout(() => {
          // <a>
          if (link.tagName === 'A') window.location.href = link.href;
          // <button data-href>
          else if (link.tagName === 'BUTTON' && link.dataset.href) window.location.href = link.dataset.href;
          }, 1200);
      });
      });

      // If you want to automatically load each page when you switch pages, you can use window.onload hide.
      window.onload = hideLoadingMask;
  </script>

      <!-- Full Page Loading Mask-->
      <div id="loadingMask"
      style="display:none;position:fixed;z-index:9999;left:0;top:0;width:100vw;height:100vh;
      background:rgba(32,18,77,0.16);backdrop-filter:blur(2.5px);
      align-items:center;justify-content:center;transition:opacity .22s;">
      <div style="background:#ffffff3c;border-radius:26px;padding:40px 60px;box-shadow:0 8px 28px #421d7999;
          display:flex;flex-direction:column;align-items:center;gap:16px;">
          <img src="{% static 'car_loading.gif' %}" alt="Loading..." style="width:450px;height:350px;display:block;">
          <span class="golden-glow" style="font-size:3em;letter-spacing:.8px;">Loading…</span>
      </div>
    </div>
</body>
</html>
